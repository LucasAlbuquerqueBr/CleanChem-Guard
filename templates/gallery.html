{% extends "base.html" %}

{% block content %}
<div style="padding-top: 100px; text-align: center;">
    <h1>Exquisite Results</h1>
    <p style="color: var(--text-muted);">Filter by hashtag to see specific cleaning mastery.</p>
    
    <div class="filter-bar" style="margin: 2rem 0;">
        <input type="text" id="tagFilter" placeholder="Search tags (e.g. #kitchen, #marble)..." 
               style="padding: 1rem; width: 300px; border-radius: 50px; border: 1px solid var(--glass-border); background: rgba(0,0,0,0.3); color: white; outline: none;">
    </div>
</div>

<div class="gallery-grid" id="galleryGrid">
    {% for post in posts %}
    <div class="gallery-item" data-tags="{{ post.tags|join(' ') }}">
        <div class="card-3d">
            <img src="{{ url_for('static', filename='uploads/' + post.image_path) }}" class="card-img" alt="Post">
            <div class="card-overlay">
                <p style="font-weight: bold; margin-bottom: 0.5rem;">{{ post.description }}</p>
                <div class="tags" style="color: var(--accent); font-size: 0.8rem;">
                    {% for tag in post.tags %}
                        <span>#{{ tag }}</span>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <p style="grid-column: 1/-1; text-align: center; color: var(--text-muted);">No posts yet. Be the first to share your work!</p>
    {% endfor %}
</div>

<script>
document.getElementById('tagFilter').addEventListener('input', function(e) {
    const term = e.target.value.toLowerCase();
    const items = document.querySelectorAll('.gallery-item');
    
    items.forEach(item => {
        const tags = item.dataset.tags.toLowerCase();
        if (tags.includes(term)) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
});
</script>
{% endblock %}
